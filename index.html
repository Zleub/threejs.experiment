<html>
<head>
	<title>My first Three.js app</title>
	<style>
		body { margin: 0; }
		canvas { width: 100%; height: 100% }
	</style>
</head>
<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r69/three.min.js"></script>
	<script>
		function log(object) { console.log(object) }

		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

		var renderer = new THREE.WebGLRenderer();
		renderer.setSize( window.innerWidth, window.innerHeight );
		document.body.appendChild( renderer.domElement );

		var geometry = new THREE.BoxGeometry(1, 1, 1)

		function add_box(offx, offy, offz)
		{
			var s = new THREE.Mesh( geometry , new THREE.MeshBasicMaterial({color: '#DDDDDD', wireframe: true}));
			s.position.x = offx;
			s.position.y = offy;
			s.position.z = offz;
			scene.add( s );
		}

		function make_matricial_scene(x, y, z)
		{
			for (var i = -x; i < x; i++)
				for (var j = -y; j < y; j++)
					for (var k = -z; k < z; k++)
						add_box(i, j, k)
		}

		function make_matricial_scene_2d(x, y)
		{
			for (var i = -x; i < x; i++)
				for (var j = -y; j < y; j++)
					add_box(i, j, 0)
		}


		// make_matricial_scene(5, 3, 3)
		add_box(-0.5, 1, 0)
		add_box(0.5, 1, 0)
		add_box(-1.5, 1, 0)
		add_box(1.5, 1, 0)
		add_box(-0.5, 0, 0)
		add_box(0.5, 0, 0)
		add_box(-1.5, 0, 0)
		add_box(1.5, 0, 0)
		add_box(-0.5, -1, 0)
		add_box(0.5, -1, 0)
		add_box(-0.5, -2, 0)
		add_box(0.5, -2, 0)

		var test1 = new THREE.Geometry();
		test1.vertices.push(
			new THREE.Vector3( -2, 1.5, 0.5 ),
			new THREE.Vector3( -2, -0.5, 0.5 ),
			new THREE.Vector3( 2, -0.5, 0.5 ),
			new THREE.Vector3( 2, 1.5, 0.5)
		);

		test1.faces.push( new THREE.Face3( 0, 1, 2 ) );
		test1.faces.push( new THREE.Face3( 3, 0, 2 ) );

		scene.add(new THREE.Mesh(test1, new THREE.MeshBasicMaterial({color: '#DDDDDD'})))

		var test2 = new THREE.Geometry();
		test2.vertices.push(
			new THREE.Vector3( -2, 1.5, -0.5 ),
			new THREE.Vector3( -2, -0.5, -0.5 ),
			new THREE.Vector3( 2, -0.5, -0.5 ),
			new THREE.Vector3( 2, 1.5, -0.5)
		);

		test2.faces.push( new THREE.Face3( 1, 0, 2 ) );
		test2.faces.push( new THREE.Face3( 0, 3, 2 ) );

		scene.add(new THREE.Mesh(test2, new THREE.MeshBasicMaterial({color: '#DDDDDD'})))

		camera.position.z = 5;

		var render = function () {
			requestAnimationFrame( render );
			renderer.render(scene, camera);
		};

		function keypressed(key)
		{
			// log('keypressed')
			// log(key)
		}
		function keydown(key)
		{
			log(key.keyCode)
			switch(key.keyCode) {
				// case 13:
				// 	shape = add_box();
				// 	break;
				case 37:
					//left key pressed
					scene.rotation.y -= 0.1
					break;
				case 38:
					// up key pressed
					scene.rotation.x -= 0.1
					break;
				case 39:
					// right key pressed
					scene.rotation.y += 0.1
					break;
				case 40:
					//down key pressed
					scene.rotation.x += 0.1
					break;

				case 49:
					//down key pressed
					scene = scene1
					break;
				case 50:
					//down key pressed
					scene = scene2
					break;


				case 87:
					//s key pressed
					camera.translateZ(-0.5);
					break;
				case 83:
					//w key pressed
					camera.translateZ(0.5);
					break;
				case 65:
					//a key pressed
					camera.translateX(0.5);
					break;
				case 68:
					//d key pressed
					camera.translateX(-0.5);
					break;

				case 104:
					//8 key pressed
					shape.position.y += 0.1
					break;
				case 98:
					//2 key pressed
					shape.position.y -= 0.1
					break;
				case 102:
					// 6 key pressed
					shape.position.x += 0.1
					break;
				case 100:
					//4 key pressed
					shape.position.x -= 0.1
					break;
		}
	}
	function keyup(key)
	{
		// log('keypressed')
		// log(key)
	}

	window.addEventListener("keypress", keypressed, false);
	window.addEventListener("keydown", keydown, false);
	window.addEventListener("keyup", keyup, false);



window.addEventListener('mousemove', function (e) {
		var mouseX = ( e.clientX - window.innerWidth / 2 );
		var mouseY = ( e.clientY - window.innerHeight / 2 );
		scene.rotation.x = mouseY * 0.005;
		scene.rotation.y = mouseX * 0.005;

		renderer.render( scene, camera );
	}, false);

	render();
</script>
</body>
</html>
